<?php		class sdgroup {		var $name;		var $grps=array();		var $props=array();		function __construct($data){			$this->name = $data;			/*$this->props[0]=new sdprop('PropertyName','Value01');*/		}				function fromstring($IsFirst, $Data, &$Index, $AllowEqualsInValue)		{			if ($Data==""){return "Data is empty!";}						$Results="";			$State=0; /*0=Nothing 1=InProperty 2=InComment*/						$StartIndex=$Index;	/*The start of the group.*/			$ErrorIndex=0; /*Used for error handling.*/			$tName=""; /*Temp group or propery name.*/			$tValue=""; /*same but for value.*/						while ($Index < strlen($Data)) {				$chr=substr($Data,$Index,1);								switch ($State){					case 0: /*In nothing*/						switch ($chr){							case "=":								$ErrorIndex=$Index;								$State=1; /*We are now in state 1(in property)*/								break;															case ";":								$tName="";								$tValue="";								$Results .= " #Found end of property but no beginning at index: " . $Index;								break;															case "{": /*New group*/								$Index++;								$tmpG = new sdgroup(trim($tName));								$Results .= $tmpG->fromstring(false, $Data, $Index, $AllowEqualsInValue);								$grps[]=$tmpG;								$tName="";								break;															case "}": /*End of current group*/								if ($IsFirst==true){									$tName .=$chr;								}else{									return $Results;								}								break;															case "/":								if ($Index-1>=0){									if (substr($Data, $Index-1, 1)=="/"){										$tName="";										$State=2;										$ErrorIndex=$Index;									}								}								break;															default:								$tName .= $chr;								break;						}												break;					case 1: /*In property.*/						if ($chr=";"){							$props[]=new sdprop(trim($tName),$tValue);							$tName="";							$tValue="";							$State=0;													}elseif( $chr="="){							if ($AllowEqualsInValue==true){								$tValue .= $chr;							}else{								$Results .= "  #Missing end of property " . trim($tName) . " at index: " . $ErrorIndex;                                $ErrorIndex = $Index;                                $tName = "";                                $tValue = "";							}						}else{							$tValue .=$chr;						}						break;											case 2; /*In comment*/						if ($Index-1>=0){							if (substr($Data,$Index-1,1)=="/"){								$State=0;							}						}						break;				}				$Index++;			}			echo "done fromstring";		} /*end fromstring function.*/	} /*end sdgroup class.*/		/*$g= new sdgroup("TheName",false);	echo $g->name;	echo $g->props[0]->name;*/			$g=new sdgroup("");	$index=0;	echo $g->fromstring(true,"gname{p=2;}",$index,true);	echo $g->grps[];		class sdprop {		var $name;		var $value;		function __construct($name, $value){			$this->name=$name;			$this->value=$value;		}	}?>